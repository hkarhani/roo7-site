<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Referral Program</title>
  <link rel="stylesheet" href="dashboard.css?v=5.4" />
  <link rel="stylesheet" href="referrals.css?v=1.1" />
  <link rel="stylesheet" href="referrals-professional.css?v=1.1" />
</head>
<body>
  <div class="dashboard-header">
    <h1>🎯 Referral Program</h1>

    <div class="actions">
      <button id="generate-code-btn">🔄 Generate New Code</button>
      <button id="toggle-theme">Toggle Theme</button>
      <button id="back-to-dashboard">← Dashboard</button>
    </div>
  </div>

  <main class="dashboard-grid referrals-grid">
    <!-- Referral Overview Section -->
    <section id="section-overview" class="dashboard-card">
      <h2>💰 Earnings Overview</h2>
      <div class="earnings-stats">
        <div class="stat-card primary">
          <div class="stat-icon">💵</div>
          <div class="stat-content">
            <div class="stat-label">Current Balance</div>
            <div id="current-balance" class="stat-value">$0.00</div>
          </div>
        </div>
        <div class="stat-card success">
          <div class="stat-icon">🎉</div>
          <div class="stat-content">
            <div class="stat-label">Total Earned</div>
            <div id="total-earned" class="stat-value">$0.00</div>
          </div>
        </div>
        <div class="stat-card info">
          <div class="stat-icon">👥</div>
          <div class="stat-content">
            <div class="stat-label">Successful Referrals</div>
            <div id="referrals-count" class="stat-value">0</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Share Your Code Section -->
    <section id="section-share" class="dashboard-card">
      <h2>🔗 Share Your Referral Code</h2>
      <div class="referral-code-section">
        <div class="code-display">
          <label for="referral-code-input">Your Referral Code:</label>
          <div class="code-input-group">
            <input type="text" id="referral-code-input" readonly placeholder="No code generated yet">
            <button id="copy-code-btn" class="copy-btn" title="Copy Code">📋</button>
          </div>
        </div>
        

        <div class="share-buttons">
          <button id="share-email" class="share-btn email">
            <span class="share-icon">📧</span>
            <span class="share-text">Share via Email</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Web3 Wallet Connection Section -->
    <section id="section-wallet" class="dashboard-card">
      <h2>🔗 Connect Web3 Wallet</h2>
      <div class="wallet-section">
        <!-- Not Connected State -->
        <div id="wallet-not-connected" class="wallet-not-connected">
          <div class="connect-info">
            <div class="info-icon">🔗</div>
            <div class="info-content">
              <h4>Connect Your Wallet for Payouts</h4>
              <p>Connect your Web3 wallet to receive referral commission payments securely</p>
            </div>
          </div>
          <div class="wallet-providers">
            <button id="connect-metamask" class="wallet-provider-btn">
              <div class="provider-icon">🦊</div>
              <div class="provider-info">
                <span class="provider-name">MetaMask</span>
                <span class="provider-desc">Most popular wallet</span>
              </div>
            </button>
            <button id="connect-wallet-generic" class="wallet-provider-btn">
              <div class="provider-icon">👛</div>
              <div class="provider-info">
                <span class="provider-name">Other Wallets</span>
                <span class="provider-desc">WalletConnect, Coinbase, etc.</span>
              </div>
            </button>
          </div>
        </div>

        <!-- Connected State -->
        <div id="wallet-connected" class="wallet-connected" style="display: none;">
          <div class="wallet-info">
            <div class="wallet-header">
              <div class="wallet-icon">✅</div>
              <div class="wallet-details">
                <span class="wallet-label">Connected Wallet</span>
                <div class="wallet-address-display">
                  <code id="connected-wallet-address"></code>
                  <span id="wallet-network-badge" class="network-badge">Ethereum</span>
                </div>
              </div>
            </div>
            <div class="wallet-status">
              <span id="wallet-verified-status" class="status-badge">✅ Connected</span>
              <span id="connection-time" class="connection-info"></span>
            </div>
          </div>
          <div class="wallet-actions">
            <button id="request-verification-btn" class="btn-verification" style="display: none;">🔍 Request Verification</button>
            <button id="disconnect-wallet-btn" class="btn-secondary">🔌 Disconnect</button>
            <button id="change-wallet-btn" class="btn-edit">🔄 Change Wallet</button>
          </div>
        </div>
        
        <div class="wallet-note">
          <p class="wallet-note-text">💡 Connect your wallet to receive your referral bonuses</p>
        </div>
      </div>
    </section>

    <!-- Referral History Section -->
    <section id="section-history" class="dashboard-card">
      <h2>📊 Referral History</h2>
      <div class="history-filters">
        <select id="status-filter">
          <option value="">All Statuses</option>
          <option value="pending">Pending</option>
          <option value="qualified">Qualified</option>
          <option value="paid">Paid Out</option>
        </select>
        <button id="filter-btn" class="filter-btn">Apply Filter</button>
      </div>
      
      <div class="table-container">
        <table id="referrals-table">
          <thead>
            <tr>
              <th>Referred User</th>
              <th>Email</th>
              <th>Sign-up Date</th>
              <th>Commission</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td colspan="5" class="loading-message">Loading referral history...</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Program Details Section (Full Row) -->
    <section id="section-details" class="dashboard-card full-width">
      <h2>📋 Program Details</h2>
      <div class="program-info">
        <div class="info-card">
          <div class="info-icon">💸</div>
          <div class="info-content">
            <h4>Commission Rate</h4>
            <p>Earn <strong>20%</strong> commission when referred users use your code during invoice payment</p>
          </div>
        </div>
        
        <div class="info-card">
          <div class="info-icon">⏰</div>
          <div class="info-content">
            <h4>Payment Conditions</h4>
            <p>Commission paid <strong>only when</strong> referred users use your code during invoice payment</p>
          </div>
        </div>
        
        <div class="info-card">
          <div class="info-icon">🎯</div>
          <div class="info-content">
            <h4>How It Works</h4>
            <p>Share your code with new customers who enter it when <strong>paying invoices</strong></p>
          </div>
        </div>
        
        <div class="info-card">
          <div class="info-icon">💰</div>
          <div class="info-content">
            <h4>Payout Methods</h4>
            <p>Cryptocurrency Wallet Transfer (minimum payout: <strong>100 USDT</strong>)</p>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Scripts -->
  <script src="theme-manager.js?v=1"></script>
  <script type="module" src="referrals.js?v=1.5"></script>
</body>
</html>